apiVersion: hyperspike.io/v1
kind: Gitea
metadata:
  labels:
    app.kubernetes.io/name: gitea-operator
    app.kubernetes.io/managed-by: kustomize
  name: git
spec:
  tls: true
  image: codeberg.org/forgejo/forgejo:13.0.4
  #objectStorage:
  #  type: s3
  certIssuer: selfsigned
  prometheus: false
  prometheusLabels:
    prometheus: prometheus
  valkey: false
  ingress:
    #annotations:
    #  cert-manager.io/cluster-issuer: letsencrypt
    host: git.local.net
  postgres:
    provider: cnpg
---
apiVersion: hyperspike.io/v1
kind: User
metadata:
  labels:
    app.kubernetes.io/name: gitea-operator
    app.kubernetes.io/managed-by: kustomize
  name: dan
spec:
  email: demo@git.local
  password:
    name: demo-password
    key: password
  instance:
    name: git
---
apiVersion: v1
kind: Secret
metadata:
  name: demo-password
type: Opaque
stringData:
  password: test1234
---
#apiVersion: hyperspike.io/v1
#kind: Org
#metadata:
#  labels:
#    app.kubernetes.io/name: gitea-operator
#    app.kubernetes.io/managed-by: kustomize
#  name: demo
#spec:
#  description: Test Env for Operator
#  instance:
#    name: git
#  teams:
#  - name: Admin
#    permission: admin
#    includeAllRepos: true
#    createOrgRepo: true
#    members:
#    - demo
#---
#apiVersion: hyperspike.io/v1
#kind: Repo
#metadata:
#  labels:
#    app.kubernetes.io/name: gitea-operator
#    app.kubernetes.io/managed-by: kustomize
#  name: repo-sample
#spec:
#  private: true
#  org:
#    name: demo
---
#apiVersion: hyperspike.io/v1
#kind: Repo
#metadata:
#  labels:
#    app.kubernetes.io/name: gitea-operator
#    app.kubernetes.io/managed-by: kustomize
#  name: infra
#spec:
#  private: true
#  org:
#    name: test
